let t,e,n,a;function o(t){return(t-2451545)/36525}function i(t){return 180*t/Math.PI}function r(t){return Math.PI*t/180}function l(t){for(var e=280.46646+t*(36000.76983+3032e-7*t);e>360;)e-=360;for(;e<0;)e+=360;return e}function s(t){return 357.52911+t*(35999.05029-1537e-7*t)}function c(t){return .016708634-t*(42037e-9+1267e-10*t)}function u(t){var e=r(s(t));return Math.sin(e)*(1.914602-t*(.004817+14e-6*t))+Math.sin(e+e)*(.019993-101e-6*t)+289e-6*Math.sin(e+e+e)}function d(t){return 23+(26+(21.448-t*(46.815+t*(59e-5-.001813*t)))/60)/60+.00256*Math.cos(r(125.04-1934.136*t))}function f(t){var e=d(t),n=function(t){return l(t)+u(t)-.00569-.00478*Math.sin(r(125.04-1934.136*t))}(t);return i(Math.asin(Math.sin(r(e))*Math.sin(r(n))))}function h(t){var e=d(t),n=l(t),a=c(t),o=s(t),u=Math.tan(r(e)/2);u*=u;var f=Math.sin(2*r(n)),h=Math.sin(r(o)),m=Math.cos(2*r(n)),g=Math.sin(4*r(n)),v=Math.sin(2*r(o)),M=u*f-2*a*h+4*a*u*h*m-.5*u*u*g-1.25*a*a*v;return 4*i(M)}function m(t){for(var e=!1,n=""+t,a=0;a<n.length;a++){var o=n.charAt(a);if(0!=a||"-"!=o&&"+"!=o){if("."==o&&!e){e=!0;continue}if(o<"0"||o>"9")return!1}}return!0}function g(t,e,n){e<=2&&(t-=1,e+=12);var a=Math.floor(t/100);return Math.floor(365.25*(t+4716))+Math.floor(30.6001*(e+1))+n+(2-a+Math.floor(a/4))-1524.5}function v(t,e,n,a){var l,s,c=o(e),u=h(c),d=f(c),m=(l=r(n),s=r(d),Math.acos(Math.cos(r(90.833))/(Math.cos(l)*Math.cos(s))-Math.tan(l)*Math.tan(s)));return t||(m=-m),720-4*(a+i(m))-u}function M(t,e,n,a,l){if("number"!=typeof n)throw Error("latitude must be a number");if("number"!=typeof a)throw Error("longitude must be a number");var d=v(t,e,n,a),g=v(t,e+d/1440,n,a);if(m(g)){var M=g+60*l,p=function(t,e,n,a,o){var l=h(t),d=f(t);!function(t){var e=s(t)+u(t),n=c(t);r(e)}(t);for(var m=e+(l+4*a-60*o);m>1440;)m-=1440;var g=m/4-180;g<-180&&(g+=360);var v=r(g),M=Math.sin(r(n))*Math.sin(r(d))+Math.cos(r(n))*Math.cos(r(d))*Math.cos(v);M>1?M=1:M<-1&&(M=-1);var y=i(Math.acos(M)),p=Math.cos(r(n))*Math.sin(r(y));if(Math.abs(p)>.001){var L=(Math.sin(r(n))*Math.cos(r(y))-Math.sin(r(d)))/p;Math.abs(L)>1&&(L=L<0?-1:1);var b=180-i(Math.acos(L));g>0&&(b=-b)}else if(n>0)var b=180;else var b=0;b<0&&(b+=360);var E=function(t){if(t>85)var e=0;else{var n=Math.tan(r(t));if(t>5)var e=58.1/n-.07/(n*n*n)+86e-6/(n*n*n*n*n);else if(t>-.575)var e=1735+t*(-518.2+t*(103.4+t*(-12.79+.711*t)));else var e=-20.774/n;e/=3600}return e}(90-y);return{azimuth:b,elevation:90-(y-E)}}(o(e+g/1440),M,n,a,l).azimuth,L=e;if(M<0||M>=1440)for(var b=M<0?1:-1;M<0||M>=1440;)M+=1440*b,L-=b}else{var E,k,w,p=-1,M=0,S=(w=(k=(E=function(t){var e=Math.floor(t+.5);if(e<2299161)var n=e;else var a=Math.floor((e-1867216.25)/36524.25),n=e+1+a-Math.floor(a/4);var o=n+1524,i=Math.floor((o-122.1)/365.25),r=Math.floor(365.25*i),l=Math.floor((o-r)/30.6001),s=o-r-Math.floor(30.6001*l)+(t+.5-e),c=l<14?l-1:l-13;return{year:c>2?i-4716:i-4715,month:c,day:s}}(e)).year)%4==0&&k%100!=0||k%400==0?1:2,Math.floor(275*E.month/9)-w*Math.floor((E.month+9)/12)+E.day-30);L=n>66.4&&S>79&&S<267||n<-66.4&&(S<83||S>263)?y(!t,t,e,n,a,l):y(t,t,e,n,a,l)}return{jday:L,timelocal:M,azimuth:p}}function y(t,e,n,a,o,i){for(var r=n,l=t?1:-1,s=v(e,r,a,o);!m(s);)r+=l,s=v(e,r,a,o);for(var c=s+60*i;c<0||c>=1440;){var u=c<0?1:-1;c+=1440*u,r-=u}return r}const p=new Proxy(JSON.parse(localStorage.getItem("chilloclock")||"{}"),{get:(t,e)=>t[e],set:(t,e,n)=>(t[e]=n,requestAnimationFrame(function(){localStorage.setItem("chilloclock",JSON.stringify(t))}),!0)}),L=document.getElementById("helpIcon"),b=document.getElementById("welcome"),E=b.querySelector(".closeIcon"),k=document.querySelector(".chilloclock"),w=document.querySelector(".fadeOverlay");p.baseSize&&k.style.setProperty("--base-size",`${p.baseSize}px`);let S=!1,I=0;L.addEventListener("animationend",function(t){t.target.classList.contains("fadeout")?(t.target.classList.remove("fadeout"),t.target.hidden=!0):t.target.classList.remove("fadein")});let z=0;function F(){L.classList.add("fadeout")}function T(){b.hidden=!0}function B(o,i){p.geolocation={latitude:o,longitude:i};let r=new Date,l=-(r.getTimezoneOffset()/60),s=g(r.getFullYear(),r.getMonth()+1,r.getDate());t=M(1,s,o,i,l),e=M(0,s,o,i,l);let c=60*r.getHours()+r.getMinutes();if(c<t.timelocal){S=!0;let e=new Date(r.getTime()-432e5);n=M(0,g(e.getFullYear(),e.getMonth()+1,e.getDate()),o,i,l).timelocal,a=t.timelocal+1440-n}else if(c<e.timelocal)S=!1,n=t.timelocal,a=e.timelocal-t.timelocal;else{S=!0,n=e.timelocal;let s=new Date(r.getTime()+432e5);a=(t=M(1,g(s.getFullYear(),s.getMonth()+1,s.getDate()),o,i,l)).timelocal+1440-n}S?document.body.classList.add("night"):document.body.classList.remove("night"),T(),z=setTimeout(F,3e3),function o(){clearTimeout(I);let i=new Date,r=60*i.getHours()+i.getMinutes(),l=r<n,s=l?(r+1440-e.timelocal)/a:(r-n)/a;if(s>1)return void B(p.geolocation.latitude,p.geolocation.longitude);(l?t.timelocal-r<10:e.timelocal-r<10)&&l&&(w.classList.contains("morningFade")?w.classList.contains("nightFade")||w.classList.add("nightFade"):w.classList.add("morningFade"));let c=180*s+180*!S;k.style.setProperty("--arm-angle",`${c}deg`),I=setTimeout(o,1e4)}()}document.addEventListener("keydown",function(t){"Escape"===t.key&&T()}),document.body.addEventListener("pointermove",function(t,e=16){let n,a=!0,o=!1;function i(){o?(t.apply(this,n),n=void 0,o=!1,setTimeout(i,e)):a=!0}return function(...r){a?(a=!1,setTimeout(i,e),t.apply(this,r)):(n=r,o=!0)}}(function(){clearTimeout(z),L.classList.remove("fadeout"),L.hidden&&(L.classList.add("fadein"),L.hidden=!1),z=setTimeout(F,3e3)},500)),E.addEventListener("click",T);const P="geolocation"in navigator;function D(){document.getElementById("wikiButton").addEventListener("click",function(){let t=document.getElementById("city");t.value&&window.open(`https://en.wikipedia.org/w/index.php?title=Special%3ASearch&search=${t.value}`,"_blank")});let t=document.getElementById("coordinatesForm");t.addEventListener("submit",function(e){e.preventDefault();let{latitude:n,longitude:a}=t.elements;B(Number(n.value),Number(a.value))}),document.getElementById("locationForm").hidden=!1}function x(){let t=document.getElementById("locationButton");P?t.addEventListener("click",function(){navigator.geolocation.getCurrentPosition(function(t){B(t.coords.latitude,t.coords.longitude)},D)}):(t.hidden=!0,D()),b.hidden=!1}let{geolocation:N}=p;N?B(N.latitude,N.longitude):x(),L.addEventListener("click",x),w.addEventListener("animationend",function(t){"nightFade"===t.animationName?(t.target.classList.remove("nightFade"),t.target.classList.add("night")):(t.target.classList.remove("morningFade"),t.target.classList.remove("night"))}),document.addEventListener("keydown",function(t){let e=p.baseSize||parseInt(getComputedStyle(k).getPropertyValue("--base-size"),10);"="===t.key||"+"===t.key?(e+=1,k.style.setProperty("--base-size",`${e}px`),p.baseSize=e):"-"===t.key&&(e-=1,k.style.setProperty("--base-size",`${e}px`),p.baseSize=e)});
//# sourceMappingURL=chilloclock.9320c17c.js.map
